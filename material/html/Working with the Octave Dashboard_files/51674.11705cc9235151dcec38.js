!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="c14d4e4b-2408-4610-a263-a58fdb1a6ea2",e._sentryDebugIdIdentifier="sentry-dbid-c14d4e4b-2408-4610-a263-a58fdb1a6ea2")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.384.0"},(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[51674],{98514:(e,r,t)=>{t.d(r,{A:()=>c});var n=t(49555),a=t(14041);const c=function(e){var r=(0,a.useRef)(),t=(0,a.useState)(null),c=(0,n.A)(t,2),o=c[0],i=c[1],s=(0,a.useCallback)((function(e){var r=(0,n.A)(e,1)[0];requestAnimationFrame((function(){i({height:r.borderBoxSize[0].blockSize,target:r.target,width:r.borderBoxSize[0].inlineSize})}))}),[]);return(0,a.useEffect)((function(){var t,n,a=e instanceof Element?e:null==e?void 0:e.current;(null===(t=r.current)||void 0===t||t.disconnect(),r.current=new ResizeObserver(s),a)&&(null===(n=r.current)||void 0===n||n.observe(a));return function(){var e;return null===(e=r.current)||void 0===e?void 0:e.disconnect()}}),[s,e]),o}},51674:(e,r,t)=>{t.d(r,{A:()=>T});var n=t(67136),a=t(49555),c=(t(28200),t(83902),t(16349),t(23922),t(96837),t(57627),t(14041)),o=t(31683),i=t(40101),s=t(31733),l=t(16540),u=t(10790),m=t(38755),f=t(59503);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){var r=e.children,t=(0,i.f8)((function(e){return e.branches.ephemeralBranch})),a=(0,c.useMemo)((function(){return t||void 0}),[t]),o=(0,f.mN)({defaultValues:a});return(0,c.useEffect)((function(){o.reset(a)}),[a,o]),c.createElement(f.Op,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},o),r)}var b=function(){var e=(0,f.xW)();if(!e)throw new Error("CreateBranchFormProvider is not provided");return e},h=t(32816),g=t(92207),v=t.n(g),y=t(95381),O=t(3230),E=t(18409),w=t(83382),j=t(84801),A=t(2194),B=t(412),P=t(58160),C=(t(14292),t(98514)),S=t(87352),D=t(16975);const x={"BranchNameInput-prefix":"BranchNameInput-prefix2Vva-zbD8BKd"};var _=["baseVersion","className"];function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}const F=(0,c.forwardRef)((function(e,r){var t=e.baseVersion,a=e.className,i=(0,P.A)(e,_),s=(0,o.A)(x,"BranchNameInput"),l=(0,c.useRef)(null),u=(0,c.useRef)(null),m=((0,C.A)(u)||{}).width,f=void 0===m?0:m,d=(0,c.useMemo)((function(){return t.length>10?"".concat(t.slice(0,10),"..."):t}),[t]);return(0,c.useEffect)((function(){var e,r=null===(e=l.current)||void 0===e?void 0:e.querySelector(".InputParent");r&&r.style.setProperty("--Input-prefix-width","".concat(f,"px"))}),[f]),c.createElement("div",{ref:l},c.createElement(S.A,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({ref:r,autoComplete:"off",className:s("&",a),placeholder:"add-ai-docs",prefix:c.createElement("span",{ref:u,className:s("-prefix")},c.createElement(D.Ay,{asTitle:!0,content:t,disabled:t===d},c.createElement("span",null,"v",d)),"_"),size:"sm"},i)))}));var N=t(88022),M=t(2711),V=t(1276);const R={CreateBranchForm:"CreateBranchForm2mRsyvgVQM-l",CreateBranchForm_disabled:"CreateBranchForm_disabled1fU2URWB2w-w","CreateBranchForm-name-form-group":"CreateBranchForm-name-form-group3efzBbsCgbh4","CreateBranchForm-name-form-group-label":"CreateBranchForm-name-form-group-label2X1Av3d9AIFL","CreateBranchForm-divider":"CreateBranchForm-divider1IUMCDRciKE-","CreateBranchForm-paygate":"CreateBranchForm-paygate3KOA_s-GvROW","CreateBranchForm-paygate-p":"CreateBranchForm-paygate-p3uQRvPjVnydn","CreateBranchForm-paygate-button":"CreateBranchForm-paygate-button20GAeUsyoiAQ"};t(81203),t(74397),t(3260),t(18119);function I(e){var r=["/.","..","//",".lock/"].find((function(r){return e.includes(r)}));if(r)return{isValid:!1,error:'Branch names cannot contain "'.concat(r,'".')};var t=["/",".lock"].find((function(r){return e.endsWith(r)}));return t?{isValid:!1,error:'Branch names cannot end with "'.concat(t,'".')}:!1===/^[\w.\-/]+$/.test(e)?{isValid:!1,error:'Branch names can only contain alphanumeric, "_", ".", "-", and "/" characters.'}:{isValid:!0}}function L(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?L(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function q(e){var r=e.apiError,t=e.name;return c.createElement(N.A,{apiError:r,description:c.createElement(c.Fragment,null,"Failed to create ",c.createElement(B.A,{maxWidth:100},"v",t),". Please try again or"," ",c.createElement("a",{href:"mailto:support@readme.io",rel:"noreferrer",target:"_blank"},"reach out to support"),"."),kind:"error",title:"Problem Creating Branch"})}function U(e){var r=e.name,t=(0,M.A)();return c.createElement(N.A,{description:c.createElement(c.Fragment,null,c.createElement(B.A,{maxWidth:100},"v",r)," has been created."," ",c.createElement("a",{href:t(r),rel:"noreferrer"},"View now")),kind:"success",title:"Branch Created"})}function W(e){var r=e.onSuccess,t=(0,o.A)(R,"CreateBranchForm"),n=(0,O.A)("CreateBranchForm"),m=(0,i.Iw)((function(e){return e.plan.features})).branches,f=(0,y.A)(),d=(0,M.A)(),p=b(),g=(0,V.N9)().setBlockingModalValue,B=(0,i.f8)((function(e){return[e.branches.ephemeralBranch,e.branches.versionsMap,e.branches.createBranch]})),P=(0,a.A)(B,3),C=P[0],S=P[1],D=P[2],x=(0,c.useMemo)((function(){var e,r;return C&&(null===(e=S[C.base])||void 0===e||null===(r=e.branches)||void 0===r?void 0:r.data)||[]}),[C,S]);(0,c.useEffect)((function(){p.setFocus("name")}),[p]);var _=p.handleSubmit(function(){var e=(0,h.A)(v().mark((function e(t){var n,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:if(n="".concat(C.base,"_").concat(t.name),!x.some((function(e){return e.name===n}))){e.next=6;break}return p.setError("name",{type:"value",message:"Branch already exists."}),e.abrupt("return");case 6:if((a=I(t.name)).isValid){e.next=10;break}return p.setError("name",{type:"value",message:a.error}),e.abrupt("return");case 10:return e.prev=10,g("Creating Branch…"),e.next=14,D({name:n});case 14:if(o=e.sent,(0,j.me)(c.createElement(U,{name:o.data.name})),!r){e.next=19;break}return e.next=19,null==r?void 0:r(o);case 19:g("Redirecting…"),window.location.assign(d(o.data.name)),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(10),(0,j.me)(c.createElement(q,{apiError:e.t0,name:n})),g("");case 27:case"end":return e.stop()}}),e,null,[[10,23]])})));return function(r){return e.apply(this,arguments)}}());return C?c.createElement("form",{autoComplete:"off","data-color-mode":"dark",onSubmit:_},c.createElement(l.A,{className:t(),gap:"sm",layout:"col"},!m&&c.createElement(l.A,{className:t("-paygate"),gap:"xs",layout:"col"},c.createElement(E.A,{access:"locked",plan:"business"}),c.createElement("p",{className:t("-paygate-p")},"Switch to Business or Enterprise to create new branches."),c.createElement(s.A,{className:t("-paygate-button"),ghost:!0,href:f("plans"),kind:"contrast",rel:"noreferrer",size:"sm",target:"_blank"},"See Plans",c.createElement(u.A,{"aria-label":"Opens in new tab",name:"arrow-up-right"}))),c.createElement(A.G,{className:t("-name-form-group",!m&&"_disabled"),control:p.control,id:n("name"),label:c.createElement(l.A,{align:"center",className:t("-name-form-group-label")},c.createElement("span",null,"Branch Name"),c.createElement(w.A,{kind:"alert"},"Beta")),name:"name",required:!0},(function(e){var r=e.field;return c.createElement(F,z(z({baseVersion:C.base},r),{},{disabled:!m}))})),c.createElement("div",{className:t("-divider",!m&&"_disabled")}),c.createElement(s.A,{className:t("-button",!m&&"_disabled"),disabled:!m,fullWidth:!0,loading:!!p.formState.isSubmitting&&"Creating Branch",size:"sm",type:"submit"},"Create Branch"))):null}const K={"CreateBranch-button":"CreateBranch-buttonfIjqycIiz4eq"};function G(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Q(e){var r=e.version,t=e.children,n=e.disabled,f=e.onSuccess,d=e.source,p=(0,o.A)(K,"CreateBranch"),h=b(),g=(0,i.f8)((function(e){return[e.branches.ephemeralBranch,e.branches.updateEphemeralBranch]})),v=(0,a.A)(g,2),y=v[0],O=v[1];return c.createElement(m.A,{appendTo:document.body,arrow:!1,content:c.createElement(W,{onSuccess:f}),interactive:!0,maxWidth:320,offset:[0,2],onClickOutside:function(){h.formState.isSubmitting||O(null)},placement:"bottom-start",role:"dialog",visible:(null==y?void 0:y.base)===r.name&&y.source===d,zIndex:10002},c.createElement(s.A,{"aria-label":"Create Branch",className:p("-button"),disabled:!!n,kind:"contrast",onClick:function(){return O({base:r.name,source:d})},size:"xs",text:!0,uppercase:!1},t||c.createElement(l.A,{align:"center",gap:"0"},c.createElement(u.A,{"aria-hidden":"true",name:"plus"}),"Branch")))}function T(e){return c.createElement(p,null,c.createElement(Q,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?G(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e)))}},2194:(e,r,t)=>{t.d(r,{G:()=>d});var n=t(67136),a=t(58160),c=(t(28200),t(83902),t(16349),t(23922),t(96837),t(57627),t(34544)),o=t(8505),i=t(14041),s=t(59503),l=t(81776),u=["children","className","control","description","defaultValue","helpMessage","id","isSemVer","isUrl","label","max","maxLength","min","minLength","name","required","warningMessage","validate"];function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e){var r,t=e.children,n=e.className,m=e.control,d=e.description,p=e.defaultValue,b=e.helpMessage,h=e.id,g=e.isSemVer,v=e.isUrl,y=e.label,O=e.max,E=e.maxLength,w=e.min,j=e.minLength,A=e.name,B=e.required,P=e.warningMessage,C=e.validate,S=(0,a.A)(e,u),D=(0,i.useMemo)((function(){return{max:"number"==typeof O?{value:O,message:"Must be less than ".concat(O)}:void 0,maxLength:"number"==typeof E?{value:E,message:"Must be less than ".concat(E," characters")}:void 0,min:"number"==typeof w?{value:w,message:"Must be greater than ".concat(w)}:void 0,minLength:"number"==typeof j?{value:j,message:"Must be at least ".concat(j," characters")}:void 0,required:B&&"Required",pattern:g?{value:c.fk,message:"Must be a semantic version"}:void 0,validate:null!=C?C:f({},v?{url:function(e){var r="Requires a valid URL";if(!e)return!0;try{return!!new URL(e)||r}catch(e){return r}}}:void 0)}}),[g,v,O,E,w,j,B,C]),x=(0,s.as)({control:m,defaultValue:p,name:A,rules:D}),_=(0,i.useMemo)((function(){return h?(0,o.Ay)(x,(function(e){e.field.id=h})):x}),[x,h]);return i.createElement(l.A,f({className:n,description:d,errorMessage:null===(r=x.fieldState.error)||void 0===r?void 0:r.message,helpMessage:b,htmlFor:h,label:y,warningMessage:P},S),null==t?void 0:t(_))}}}]);
//# sourceMappingURL=51674.11705cc9235151dcec38.js.map